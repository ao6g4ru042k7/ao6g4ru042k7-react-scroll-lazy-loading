{"version":3,"sources":["components/table/table.module.scss","components/spinner/spinner.module.scss","components/table/table.js","components/spinner/spinner.js","customHook/inScrollBottom/inScrollBottom.js","App.js","index.js"],"names":["module","exports","table","dataList","className","classes","map","data","Region","Town","Name","Id","spinner","loader","useInScrollBottom","callback","useEffect","scrollHandler","scrollHeight","Math","max","document","documentElement","body","scrollTop","window","pageYOffset","innerHeight","min","clientHeight","addEventListener","removeEventListener","App","useState","setDataList","showLen","setShowLen","axios","then","res","XML_Head","Infos","Info","com","slice","ReactDOM","render","StrictMode","getElementById"],"mappings":"kFACAA,EAAOC,QAAU,CAAC,MAAQ,uB,mBCA1BD,EAAOC,QAAU,CAAC,OAAS,wBAAwB,MAAQ,yB,sLCwB5CC,EAxBD,SAAC,GAAkB,IAAhBC,EAAe,EAAfA,SACb,OACI,wBAAOC,UAAWC,IAAQH,MAA1B,UACI,gCACI,+BACI,wCACA,sCACA,2CAGR,gCAEQC,EAASG,KAAI,SAAAC,GAAI,OACb,+BACI,6BAAKA,EAAKC,SACV,6BAAKD,EAAKE,OACV,6BAAKF,EAAKG,SAHLH,EAAKI,a,iBCZvBC,EADC,kBAAM,qBAAKR,UAAWC,IAAQQ,OAAxB,yBCsBPC,EArBW,SAACC,GACvBC,qBAAU,WACN,IAAMC,EAAgB,WAElB,IAAMC,EAAeC,KAAKC,IAAIC,SAASC,gBAAgBJ,aAAcG,SAASE,KAAKL,cAE7EM,EAAYC,OAAOC,aAAeL,SAASC,gBAAgBE,WAAaH,SAASE,KAAKC,WAEvEC,OAAOE,aAAeR,KAAKS,IAAIP,SAASC,gBAAgBO,aAAcR,SAASE,KAAKM,eACtFL,GAAaN,GAE5BH,KAIR,OADAU,OAAOK,iBAAiB,SAAUb,GAC3B,WACHQ,OAAOM,oBAAoB,SAAUd,MAE1C,CAACF,KCgBOiB,MA7Bf,WAAgB,IAAD,EACmBC,mBAAS,MAD5B,mBACN9B,EADM,KACI+B,EADJ,OAEiBD,mBAAS,KAF1B,mBAENE,EAFM,KAEGC,EAFH,KAKbtB,GAAkB,WACZX,GACFiC,EAAWD,EAAU,QAIzBnB,qBAAU,WAGRqB,IAAM,2GAA2GC,MAAK,SAAAC,GACpHL,EAAYK,EAAIhC,KAAKiC,SAASC,MAAMC,KAAKpC,KAAI,SAAAC,GAC3C,MAAO,CAAEI,GAAIJ,EAAKI,GAAIH,OAAQD,EAAKC,OAAQC,KAAMF,EAAKE,KAAMC,KAAMH,EAAKG,eAG1E,IAEH,IAAMiC,EAAMxC,EAAW,cAAC,EAAD,CAAOA,SAAUA,EAASyC,MAAM,EAAGT,KAAe,cAAC,EAAD,IACzE,OACE,qBAAK/B,UAAU,MAAf,SACGuC,KC1BPE,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEF1B,SAAS2B,eAAe,W","file":"static/js/main.36c0c483.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"table\":\"table_table__3-GJH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"spinner_loader__1XP1S\",\"load4\":\"spinner_load4__1KKOu\"};","import classes from \"./table.module.scss\";\r\nconst table = ({ dataList }) => {\r\n    return (\r\n        <table className={classes.table}>\r\n            <thead>\r\n                <tr>\r\n                    <th>Region</th>\r\n                    <th>Town</th>\r\n                    <th>Name</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                {\r\n                    dataList.map(data => (\r\n                        <tr key={data.Id}>\r\n                            <td>{data.Region}</td>\r\n                            <td>{data.Town}</td>\r\n                            <td>{data.Name}</td>\r\n                        </tr>\r\n                    ))\r\n                }\r\n            </tbody>\r\n        </table>\r\n    )\r\n}\r\nexport default table","import classes from \"./spinner.module.scss\"\r\nconst spinner = () => <div className={classes.loader}>Loading...</div>\r\nexport default spinner","import { useEffect } from 'react'\r\n\r\nconst useInScrollBottom = (callback) => {\r\n    useEffect(() => {\r\n        const scrollHandler = () => {\r\n            //文檔內容實際高度（包括超過窗口的重疊部分）\r\n            const scrollHeight = Math.max(document.documentElement.scrollHeight, document.body.scrollHeight);\r\n            //滾動條滾動距離\r\n            const scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop;\r\n            //窗口可視範圍高度\r\n            const clientHeight = window.innerHeight || Math.min(document.documentElement.clientHeight, document.body.clientHeight);\r\n            if (clientHeight + scrollTop >= scrollHeight) {\r\n                //滾到底部瞜\r\n                callback()\r\n            }\r\n        }\r\n        window.addEventListener('scroll', scrollHandler)\r\n        return () => {\r\n            window.removeEventListener('scroll', scrollHandler)\r\n        }\r\n    }, [callback])\r\n}\r\n\r\nexport default useInScrollBottom\r\n//參考 https://juejin.cn/post/6844903961862897672 ","import './App.css';\nimport { useEffect, useState } from 'react'\nimport axios from 'axios'\nimport Table from './components/table/table'\nimport Spinner from './components/spinner/spinner'\nimport useInScrollBottom from './customHook/inScrollBottom/inScrollBottom'\n\nfunction App() {\n  const [dataList, setDataList] = useState(null)\n  const [showLen, setShowLen] = useState(100)\n\n  //滾輪滾到底部時觸發，加載更多資料\n  useInScrollBottom(() => {\n    if (dataList) {\n      setShowLen(showLen + 100)\n    }\n  })\n\n  useEffect(() => {\n    //政府的API，有CORS問題，只能靠別人伺服器的反向代理來解決\n    //但是伺服器有限制不能連續請求太多次，請小心使用~\n    axios('https://cors-anywhere.herokuapp.com/https://gis.taiwan.net.tw/XMLReleaseALL_public/scenic_spot_C_f.json').then(res => {\n      setDataList(res.data.XML_Head.Infos.Info.map(data => {\n        return { Id: data.Id, Region: data.Region, Town: data.Town, Name: data.Name }\n      }))\n    })\n  }, [])\n\n  const com = dataList ? <Table dataList={dataList.slice(0, showLen)} /> : <Spinner />\n  return (\n    <div className=\"App\">\n      {com}\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}